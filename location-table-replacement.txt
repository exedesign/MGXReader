Bu dosya, ProfessionalStoryboard.jsx'te Location Cards Grid yerine kullanƒ±lacak Excel tarzƒ± tablo kodunu i√ßerir.

≈ûu satƒ±rlar arasƒ±ndaki kodu deƒüi≈ütir:
Ba≈ülangƒ±√ß: {/* Location Cards Grid */}
Biti≈ü: {/* Navigation Buttons */} √∂ncesi

Yeni kod:

                      {/* Excel-Style Location Table */}
                      <div className="bg-cinema-black/50 rounded-lg border border-cinema-gray overflow-hidden">
                        <div className="overflow-x-auto">
                          <table className="w-full">
                            <thead className="bg-cinema-gray/20 border-b border-cinema-gray sticky top-0">
                              <tr>
                                <th className="px-4 py-3 text-left text-xs font-semibold text-cinema-text-dim uppercase tracking-wider w-12">#</th>
                                <th className="px-4 py-3 text-left text-xs font-semibold text-cinema-text-dim uppercase tracking-wider w-24">G√∂rsel</th>
                                <th className="px-4 py-3 text-left text-xs font-semibold text-cinema-text-dim uppercase tracking-wider">Mekan Adƒ±</th>
                                <th className="px-4 py-3 text-left text-xs font-semibold text-cinema-text-dim uppercase tracking-wider w-28">Tip</th>
                                <th className="px-4 py-3 text-left text-xs font-semibold text-cinema-text-dim uppercase tracking-wider w-32">Zaman</th>
                                <th className="px-4 py-3 text-left text-xs font-semibold text-cinema-text-dim uppercase tracking-wider">Karakterler</th>
                                <th className="px-4 py-3 text-left text-xs font-semibold text-cinema-text-dim uppercase tracking-wider w-20">Sahne</th>
                                <th className="px-4 py-3 text-left text-xs font-semibold text-cinema-text-dim uppercase tracking-wider w-28">Durum</th>
                                <th className="px-4 py-3 text-center text-xs font-semibold text-cinema-text-dim uppercase tracking-wider w-32">ƒ∞≈ülemler</th>
                              </tr>
                            </thead>
                            <tbody className="divide-y divide-cinema-gray/30">
                              {(() => {
                                // Apply filters
                                let filteredLocations = locationAnalysis.locations.map((loc, idx) => ({ loc, originalIndex: idx }));
                                
                                // Type filter
                                if (locationFilter.type !== 'ALL') {
                                  filteredLocations = filteredLocations.filter(({loc}) => {
                                    const locType = typeof loc === 'object' ? loc.type : null;
                                    return locType === locationFilter.type;
                                  });
                                }
                                
                                // Time of day filter
                                if (locationFilter.timeOfDay !== 'ALL') {
                                  filteredLocations = filteredLocations.filter(({loc}) => {
                                    const timeOfDay = typeof loc === 'object' ? loc.timeOfDay : null;
                                    return timeOfDay === locationFilter.timeOfDay;
                                  });
                                }
                                
                                // Status filter
                                if (locationFilter.status !== 'ALL') {
                                  filteredLocations = filteredLocations.filter(({loc}) => {
                                    const locName = typeof loc === 'string' ? loc : (loc.name || loc);
                                    const hasImage = locationApprovals[locName]?.image;
                                    const isApproved = locationApprovals[locName]?.approved;
                                    
                                    if (locationFilter.status === 'APPROVED') return isApproved;
                                    if (locationFilter.status === 'PENDING') return hasImage && !isApproved;
                                    if (locationFilter.status === 'NOT_GENERATED') return !hasImage;
                                    return true;
                                  });
                                }
                                
                                // Search filter
                                if (locationFilter.search) {
                                  const searchLower = locationFilter.search.toLowerCase();
                                  filteredLocations = filteredLocations.filter(({loc}) => {
                                    const locName = typeof loc === 'string' ? loc : (loc.name || loc);
                                    const locDescription = typeof loc === 'object' ? loc.description : '';
                                    const locAtmosphere = typeof loc === 'object' ? loc.atmosphere : '';
                                    
                                    return locName.toLowerCase().includes(searchLower) ||
                                           (locDescription && locDescription.toLowerCase().includes(searchLower)) ||
                                           (locAtmosphere && locAtmosphere.toLowerCase().includes(searchLower));
                                  });
                                }
                                
                                return filteredLocations.map(({loc: location, originalIndex: index}) => {
                                  const locName = typeof location === 'string' ? location : (location.name || location);
                                  const locType = typeof location === 'object' ? location.type : null;
                                  const locDescription = typeof location === 'object' ? location.description : null;
                                  const locTimeOfDay = typeof location === 'object' ? location.timeOfDay : null;
                                  const locSceneCount = typeof location === 'object' ? location.sceneCount : 0;
                                  
                                  // Find characters
                                  const charactersInLocation = new Set();
                                  extractedScenes.forEach(scene => {
                                    const sceneLocations = scene.locations || [];
                                    const sceneLocationNames = sceneLocations.map(loc => 
                                      typeof loc === 'string' ? loc : loc.name || loc
                                    );
                                    
                                    if (sceneLocationNames.includes(locName) || 
                                        scene.location === locName ||
                                        sceneLocationNames.some(sceneLoc => 
                                          sceneLoc.toLowerCase().includes(locName.toLowerCase()) ||
                                          locName.toLowerCase().includes(sceneLoc.toLowerCase())
                                        )) {
                                      scene.characters?.forEach(char => charactersInLocation.add(char));
                                    }
                                  });
                                  
                                  const locationImage = locationApprovals[locName]?.image;
                                  const isApproved = locationApprovals[locName]?.approved;
                                  const hasImage = !!locationImage;
                                  
                                  return (
                                    <tr key={`${locName}-${index}`} className="hover:bg-cinema-gray/10 transition-colors">
                                      {/* Row Number */}
                                      <td className="px-4 py-3 text-sm text-cinema-text-dim font-mono">
                                        {index + 1}
                                      </td>
                                      
                                      {/* Thumbnail */}
                                      <td className="px-4 py-3">
                                        <div className="relative w-20 h-15 rounded overflow-hidden bg-cinema-black/40 border border-cinema-gray/30">
                                          {hasImage ? (
                                            <img
                                              src={locationImage.url}
                                              alt={locName}
                                              className="w-full h-full object-cover cursor-pointer hover:opacity-80 transition-opacity"
                                              onClick={() => window.open(locationImage.url, '_blank')}
                                              title="G√∂rseli b√ºy√ºt"
                                            />
                                          ) : (
                                            <div className="w-full h-full flex items-center justify-center text-2xl">
                                              {locType === 'INTERIOR' ? 'üè†' : locType === 'EXTERIOR' ? 'üåç' : 'üìç'}
                                            </div>
                                          )}
                                        </div>
                                      </td>
                                      
                                      {/* Name & Description */}
                                      <td className="px-4 py-3">
                                        <div className="text-sm font-semibold text-cinema-text">{locName}</div>
                                        {locDescription && (
                                          <div className="text-xs text-cinema-text-dim line-clamp-2 mt-1">
                                            {locDescription}
                                          </div>
                                        )}
                                      </td>
                                      
                                      {/* Type */}
                                      <td className="px-4 py-3">
                                        <span className={`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${
                                          locType === 'INTERIOR' ? 'bg-blue-600/20 text-blue-400' : 
                                          locType === 'EXTERIOR' ? 'bg-green-600/20 text-green-400' : 
                                          'bg-gray-600/20 text-gray-400'
                                        }`}>
                                          {locType === 'INTERIOR' && 'üè† ƒ∞√ß'}
                                          {locType === 'EXTERIOR' && 'üåç Dƒ±≈ü'}
                                          {!locType && 'üìç ‚Äî'}
                                        </span>
                                      </td>
                                      
                                      {/* Time of Day */}
                                      <td className="px-4 py-3">
                                        <span className="text-sm text-cinema-text">
                                          {locTimeOfDay === 'DAY' && '‚òÄÔ∏è G√ºnd√ºz'}
                                          {locTimeOfDay === 'NIGHT' && 'üåô Gece'}
                                          {locTimeOfDay === 'DAWN' && 'üåÖ ≈ûafak'}
                                          {locTimeOfDay === 'DUSK' && 'üåÜ Alacakaranlƒ±k'}
                                          {!locTimeOfDay && '‚Äî'}
                                        </span>
                                      </td>
                                      
                                      {/* Characters */}
                                      <td className="px-4 py-3">
                                        {charactersInLocation.size > 0 ? (
                                          <div className="flex flex-wrap gap-1">
                                            {Array.from(charactersInLocation).slice(0, 2).map(char => (
                                              <span key={char} className="text-xs bg-cinema-accent/20 text-cinema-accent px-2 py-0.5 rounded">
                                                {char}
                                              </span>
                                            ))}
                                            {charactersInLocation.size > 2 && (
                                              <span className="text-xs text-cinema-text-dim">+{charactersInLocation.size - 2}</span>
                                            )}
                                          </div>
                                        ) : (
                                          <span className="text-xs text-cinema-text-dim">‚Äî</span>
                                        )}
                                      </td>
                                      
                                      {/* Scene Count */}
                                      <td className="px-4 py-3 text-center">
                                        <span className="text-sm font-mono text-cinema-text">
                                          {locSceneCount > 0 ? locSceneCount : '‚Äî'}
                                        </span>
                                      </td>
                                      
                                      {/* Status */}
                                      <td className="px-4 py-3">
                                        <span className={`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${
                                          isApproved ? 'bg-green-600/20 text-green-400' : 
                                          hasImage ? 'bg-blue-600/20 text-blue-400' : 
                                          'bg-yellow-600/20 text-yellow-400'
                                        }`}>
                                          {isApproved ? '‚úì Onaylƒ±' : hasImage ? '‚è≥ Bekliyor' : 'üìç Yok'}
                                        </span>
                                      </td>
                                      
                                      {/* Actions */}
                                      <td className="px-4 py-3">
                                        <div className="flex gap-1 justify-center items-center">
                                          {hasImage && !isApproved ? (
                                            <>
                                              <button
                                                onClick={() => approveLocation(locName)}
                                                className="p-1.5 bg-green-600 hover:bg-green-700 text-white rounded text-xs transition-colors"
                                                title="Onayla"
                                              >
                                                ‚úì
                                              </button>
                                              <button
                                                onClick={() => rejectLocation(locName)}
                                                className="p-1.5 bg-red-600 hover:bg-red-700 text-white rounded text-xs transition-colors"
                                                title="Reddet"
                                              >
                                                ‚úó
                                              </button>
                                            </>
                                          ) : !hasImage ? (
                                            <button
                                              onClick={() => setExpandedLocationRow(expandedLocationRow === index ? null : index)}
                                              className="p-1.5 bg-cinema-accent hover:bg-cinema-accent-dark text-white rounded text-xs transition-colors"
                                              title="G√∂rsel √úret"
                                            >
                                              üé®
                                            </button>
                                          ) : (
                                            <span className="text-xs text-green-400 font-bold">‚úì</span>
                                          )}
                                          <button
                                            onClick={() => {
                                              if (confirm(`"${locName}" mekanƒ±nƒ± silmek istediƒüinizden emin misiniz?`)) {
                                                const updatedLocations = locationAnalysis.locations.filter((_, i) => i !== index);
                                                setLocationAnalysis({ ...locationAnalysis, locations: updatedLocations });
                                                const newApprovals = { ...locationApprovals };
                                                delete newApprovals[locName];
                                                setLocationApprovals(newApprovals);
                                                console.log(`üóëÔ∏è "${locName}" silindi`);
                                              }
                                            }}
                                            className="p-1.5 bg-red-600/50 hover:bg-red-600 text-white rounded text-xs transition-colors"
                                            title="Sil"
                                          >
                                            üóëÔ∏è
                                          </button>
                                        </div>
                                      </td>
                                    </tr>
                                  );
                                });
                              })()}
                            </tbody>
                          </table>
                        </div>
                        
                        {/* Empty State */}
                        {(() => {
                          let filteredLocations = locationAnalysis.locations;
                          
                          if (locationFilter.type !== 'ALL') {
                            filteredLocations = filteredLocations.filter(loc => {
                              const locType = typeof loc === 'object' ? loc.type : null;
                              return locType === locationFilter.type;
                            });
                          }
                          
                          if (locationFilter.timeOfDay !== 'ALL') {
                            filteredLocations = filteredLocations.filter(loc => {
                              const timeOfDay = typeof loc === 'object' ? loc.timeOfDay : null;
                              return timeOfDay === locationFilter.timeOfDay;
                            });
                          }
                          
                          if (locationFilter.status !== 'ALL') {
                            filteredLocations = filteredLocations.filter(loc => {
                              const locName = typeof loc === 'string' ? loc : (loc.name || loc);
                              const hasImage = locationApprovals[locName]?.image;
                              const isApproved = locationApprovals[locName]?.approved;
                              
                              if (locationFilter.status === 'APPROVED') return isApproved;
                              if (locationFilter.status === 'PENDING') return hasImage && !isApproved;
                              if (locationFilter.status === 'NOT_GENERATED') return !hasImage;
                              return true;
                            });
                          }
                          
                          if (locationFilter.search) {
                            const searchLower = locationFilter.search.toLowerCase();
                            filteredLocations = filteredLocations.filter(loc => {
                              const locName = typeof loc === 'string' ? loc : (loc.name || loc);
                              const locDescription = typeof loc === 'object' ? loc.description : '';
                              const locAtmosphere = typeof loc === 'object' ? loc.atmosphere : '';
                              
                              return locName.toLowerCase().includes(searchLower) ||
                                     (locDescription && locDescription.toLowerCase().includes(searchLower)) ||
                                     (locAtmosphere && locAtmosphere.toLowerCase().includes(searchLower));
                            });
                          }
                          
                          if (filteredLocations.length === 0) {
                            return (
                              <div className="p-8 text-center text-cinema-text-dim">
                                <div className="text-4xl mb-2">üîç</div>
                                <div>Filtrelere uygun mekan bulunamadƒ±</div>
                              </div>
                            );
                          }
                        })()}
                      </div>
                      
                      {/* Expanded Row for Image Generation */}
                      {expandedLocationRow !== null && (
                        <div className="bg-cinema-black/50 rounded-lg border-2 border-cinema-accent p-4 animate-fadeIn">
                          <div className="flex justify-between items-center mb-3">
                            <h4 className="text-lg font-semibold text-cinema-accent">
                              üé® {typeof locationAnalysis.locations[expandedLocationRow] === 'string' 
                                ? locationAnalysis.locations[expandedLocationRow] 
                                : locationAnalysis.locations[expandedLocationRow].name} - G√∂rsel √úretimi
                            </h4>
                            <button
                              onClick={() => setExpandedLocationRow(null)}
                              className="text-cinema-text-dim hover:text-cinema-text text-xl"
                            >
                              ‚úï
                            </button>
                          </div>
                          <LocationImageGenerator
                            location={typeof locationAnalysis.locations[expandedLocationRow] === 'string' 
                              ? { name: locationAnalysis.locations[expandedLocationRow] }
                              : locationAnalysis.locations[expandedLocationRow]}
                            onImageGenerated={(name, imageData) => {
                              handleLocationImageGenerated(name, imageData);
                              setExpandedLocationRow(null);
                            }}
                            characterReferences={(() => {
                              const loc = locationAnalysis.locations[expandedLocationRow];
                              const locName = typeof loc === 'string' ? loc : loc.name;
                              const charactersInLocation = new Set();
                              
                              extractedScenes.forEach(scene => {
                                const sceneLocations = scene.locations || [];
                                const sceneLocationNames = sceneLocations.map(l => 
                                  typeof l === 'string' ? l : l.name || l
                                );
                                
                                if (sceneLocationNames.includes(locName) || scene.location === locName) {
                                  scene.characters?.forEach(char => charactersInLocation.add(char));
                                }
                              });
                              
                              return Array.from(charactersInLocation)
                                .filter(charName => characterApprovals[charName]?.approved && characterApprovals[charName]?.image)
                                .map(charName => ({
                                  name: charName,
                                  image: characterApprovals[charName].image
                                }));
                            })()}
                          />
                        </div>
                      )}
